<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>JS arrow function - My Blog built on Hugo with Jane theme</title>
  <link rel="alternate" hreflang="en" href="https://yuhuix.github.io/hugo/" />

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Yuhui Xiong" />
  <meta name="description" content="Summary  箭头函数没有 prototype(原型)，所以箭头函数本身没有 this 箭头函数的 this 在定义的时候继承自外层第一个普通函数的 this（this comes from the enclosing lexical scope）。 如果箭头函数外层没有普通函数，严格模式和非严格模式下它的 this 都会指向 window(全局对象) 箭头函数本身的 this 指向不能改变，但可以修改它要继承的对象的 this。 箭头函数的 this 指向全局，使用 arguments 会报未声明的错误。 箭头函数的 this 指向普通函数时,它的 argumens 继承于该普通函数 使用 new 调用箭头函数会报错，因为箭头函数没有 constructor 箭头函数不支持 new.target 箭头函数不支持重命名函数参数,普通函数的函数参数支持重命名 箭头函数相对于普通函数语法更简洁优雅  
" />

  <meta name="keywords" content="Hugo, theme, jane" />






<meta name="generator" content="Hugo 0.37.1" />


<link rel="canonical" href="https://yuhuix.github.io/hugo/post/20190425-js-arrow-function/" />

<link rel="apple-touch-icon" sizes="180x180" href="/hugo/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/hugo/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/hugo/favicon-16x16.png">
<link rel="icon" href="/hugo/favicon.ico" />
<link rel="manifest" href="/hugo/manifest.json">
<link rel="mask-icon" href="/hugo/safari-pinned-tab.svg" color="#5bbad5">




<link href="/hugo/dist/jane.min.css?v=2.7.0" rel="stylesheet">
<link href="/hugo/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">




<meta property="og:title" content="JS arrow function" />
<meta property="og:description" content="Summary


箭头函数没有 prototype(原型)，所以箭头函数本身没有 this
箭头函数的 this 在定义的时候继承自外层第一个普通函数的 this（this comes from the enclosing lexical scope）。
如果箭头函数外层没有普通函数，严格模式和非严格模式下它的 this 都会指向 window(全局对象)
箭头函数本身的 this 指向不能改变，但可以修改它要继承的对象的 this。
箭头函数的 this 指向全局，使用 arguments 会报未声明的错误。
箭头函数的 this 指向普通函数时,它的 argumens 继承于该普通函数
使用 new 调用箭头函数会报错，因为箭头函数没有 constructor
箭头函数不支持 new.target
箭头函数不支持重命名函数参数,普通函数的函数参数支持重命名
箭头函数相对于普通函数语法更简洁优雅


" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yuhuix.github.io/hugo/post/20190425-js-arrow-function/" />



<meta property="article:published_time" content="2019-04-25T11:36:00&#43;02:00"/>

<meta property="article:modified_time" content="2019-04-25T14:06:00&#43;02:00"/>











<meta itemprop="name" content="JS arrow function">
<meta itemprop="description" content="Summary


箭头函数没有 prototype(原型)，所以箭头函数本身没有 this
箭头函数的 this 在定义的时候继承自外层第一个普通函数的 this（this comes from the enclosing lexical scope）。
如果箭头函数外层没有普通函数，严格模式和非严格模式下它的 this 都会指向 window(全局对象)
箭头函数本身的 this 指向不能改变，但可以修改它要继承的对象的 this。
箭头函数的 this 指向全局，使用 arguments 会报未声明的错误。
箭头函数的 this 指向普通函数时,它的 argumens 继承于该普通函数
使用 new 调用箭头函数会报错，因为箭头函数没有 constructor
箭头函数不支持 new.target
箭头函数不支持重命名函数参数,普通函数的函数参数支持重命名
箭头函数相对于普通函数语法更简洁优雅


">


<meta itemprop="datePublished" content="2019-04-25T11:36:00&#43;02:00" />
<meta itemprop="dateModified" content="2019-04-25T11:36:00&#43;02:00" />
<meta itemprop="wordCount" content="1353">



<meta itemprop="keywords" content="basics," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="JS arrow function"/>
<meta name="twitter:description" content="Summary


箭头函数没有 prototype(原型)，所以箭头函数本身没有 this
箭头函数的 this 在定义的时候继承自外层第一个普通函数的 this（this comes from the enclosing lexical scope）。
如果箭头函数外层没有普通函数，严格模式和非严格模式下它的 this 都会指向 window(全局对象)
箭头函数本身的 this 指向不能改变，但可以修改它要继承的对象的 this。
箭头函数的 this 指向全局，使用 arguments 会报未声明的错误。
箭头函数的 this 指向普通函数时,它的 argumens 继承于该普通函数
使用 new 调用箭头函数会报错，因为箭头函数没有 constructor
箭头函数不支持 new.target
箭头函数不支持重命名函数参数,普通函数的函数参数支持重命名
箭头函数相对于普通函数语法更简洁优雅


"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/hugo/" class="logo">Jane</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/hugo/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/hugo/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/hugo/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/hugo/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/hugo/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>
</nav>

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/hugo/" class="logo">Jane</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/hugo/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/hugo/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/hugo/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/hugo/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/hugo/about/">About</a>
      </li>
  </ul>
</nav>
  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">JS arrow function</h1>

      <div class="post-meta">
        <span class="post-time"> 2019-04-25 </span>
        <div class="post-category">
            
              <a href="/hugo/categories/js/"> js </a>
            
          </div>
        <span class="more-meta"> 1353 words </span>
        <span class="more-meta"> 3 min read </span>
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Table of Contents</h2>
  
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#summary">Summary</a></li>
<li><a href="#js-this">JS <code>this</code></a>
<ul>
<li><a href="#example-1">Example 1:</a></li>
<li><a href="#example-2">Example 2</a></li>
<li><a href="#example-3-arrow-function-are-best-suited-for-non-method-function">Example 3, arrow function are best suited for non-method function</a></li>
</ul></li>
<li><a href="#function-arguments">Function <code>arguments</code></a></li>
<li><a href="#new-operator"><code>new</code> operator</a></li>
<li><a href="#prototype-property"><code>prototype</code> property</a></li>
<li><a href="#yield-keyword"><code>yield</code> keyword</a></li>
<li><a href="#new-target"><code>new.target</code></a></li>
<li><a href="#duplicated-param-name">Duplicated param name</a></li>
<li><a href="#function-body">Function body</a>
<ul>
<li><a href="#return-object-literal">Return object literal</a></li>
<li><a href="#no-line-break-between-its-parameters-and-its-arrow">No line break between its parameters and its arrow</a></li>
</ul></li>
<li><a href="#parsing-order">Parsing Order</a></li>
<li><a href="#resources">Resources</a></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      <h2 id="summary">Summary</h2>

<ol>
<li>箭头函数没有 prototype(原型)，所以箭头函数本身没有 this</li>
<li>箭头函数的 this 在定义的时候继承自外层第一个普通函数的 this（<code>this</code> comes from the enclosing lexical scope）。</li>
<li>如果箭头函数外层没有普通函数，严格模式和非严格模式下它的 this 都会指向 window(全局对象)</li>
<li>箭头函数本身的 this 指向不能改变，但可以修改它要继承的对象的 this。</li>
<li>箭头函数的 this 指向全局，使用 arguments 会报未声明的错误。</li>
<li>箭头函数的 this 指向普通函数时,它的 argumens 继承于该普通函数</li>
<li>使用 new 调用箭头函数会报错，因为箭头函数没有 constructor</li>
<li>箭头函数不支持 new.target</li>
<li>箭头函数不支持重命名函数参数,普通函数的函数参数支持重命名</li>
<li>箭头函数相对于普通函数语法更简洁优雅</li>
</ol>

<p></p>

<h2 id="js-this">JS <code>this</code></h2>

<ol>
<li>箭头函数没有 prototype(原型)，所以箭头函数本身没有 this</li>
<li>箭头函数的 this 指向在定义的时候继承自外层第一个普通函数的 this</li>
<li>不能直接修改箭头函数的 this 指向（call, apply, bind）。Since arrow functions do not have their own this, the methods call() or apply() can only pass in parameters.</li>
<li>箭头函数外层没有普通函数，严格模式和非严格模式下它的 this 都会指向 window(全局对象)</li>
</ol>

<p>Until arrow functions, every new function defined its own this value based on how the function was called:</p>

<ul>
<li>A new object in the case of a constructor.</li>
<li>undefined in strict mode function calls.</li>
<li>The base object if the function is called as an &ldquo;object method&rdquo;.</li>
<li>etc.</li>
</ul>

<h3 id="example-1">Example 1:</h3>

<pre><code class="language-javascript">let a;
const barObj = {
  msg: 'from barObj',
};
const fooObj = {
  msg: 'from fooObj',
};

bar(); // 将bar的this指向barObj // (1)
foo.call(fooObj); // 将foo的this指向fooObj

function foo() {
  a(); // 结果：{ msg: 'from barObj' }
}

function bar() {
  a = () =&gt; {
    console.log(this, 'this指向定义的时候外层第一个普通函数');
  }; // 在bar中定义 this继承于bar函数的this指向
}
</code></pre>

<p>这时候<code>foo()</code>就会<code>log()</code> <code>window</code>。</p>

<p>如果把（1）改成<code>bar.call(barObj)</code>，那么<code>foo()</code>就会<code>log()</code> <code>barObj</code>。</p>

<h3 id="example-2">Example 2</h3>

<pre><code class="language-javascript">function Person() {
  // The Person() constructor defines `this` as an instance of itself.
  this.age = 0;

  setInterval(function() {
    // In non-strict mode, the function defines `this`
    // as the global object (because it's where the function is executed.),
    // which is different from the `this`
    // defined by the Person() constructor.
    this.age++;
  }, 1000);
}

var p = new Person();
</code></pre>

<p>This problem can be fixed by (old):</p>

<pre><code class="language-javascript">function Person() {
  var that = this; // trick
  that.age = 0;

  setInterval(function() {
    // The callback refers to the `that` variable of which
    // the value is the expected object.
    that.age++;
  }, 1000);
}
</code></pre>

<p>or in the new ES6 arrow function way:</p>

<pre><code class="language-javascript">function Person() {
  this.age = 0;

  setInterval(() =&gt; {
    this.age++; // |this| properly refers to the Person object
  }, 1000);
}
</code></pre>

<h3 id="example-3-arrow-function-are-best-suited-for-non-method-function">Example 3, arrow function are best suited for non-method function</h3>

<pre><code class="language-javascript">const obj = {
  i: 10,
  b: () =&gt; console.log(this.i, this),
  c: function() {
    console.log(this.i, this);
  },
};

obj.b(); // prints undefined, Window {...} (or the global object)
obj.c(); // prints 10, Object {...}
</code></pre>

<h2 id="function-arguments">Function <code>arguments</code></h2>

<p>Arrow functions do not have their own <code>arguments</code> object. Thus, in this example, arguments is simply a reference to the arguments of the enclosing scope. Use rest parameters (<code>...</code>) as an alternative.</p>

<h2 id="new-operator"><code>new</code> operator</h2>

<p>Not to be used as constructors.</p>

<pre><code class="language-javascript">const Foo = () =&gt; {};
const foo = new Foo(); // Uncaught TypeError: Foo is not a constructor
</code></pre>

<h2 id="prototype-property"><code>prototype</code> property</h2>

<p>Arrow functions do not have a <code>prototype</code> property.</p>

<pre><code class="language-javascript">const foo = () =&gt; {};
console.log(foo.prototype); // undefined
</code></pre>

<h2 id="yield-keyword"><code>yield</code> keyword</h2>

<p>The <code>yield</code> keyword may not be used in an arrow function&rsquo;s body (except when permitted within functions further nested within it). As a consequence, arrow functions cannot be used as generators.</p>

<h2 id="new-target"><code>new.target</code></h2>

<p><code>new.target</code>是 ES6 新引入的属性，普通函数如果通过<code>new</code>调用，<code>new.target</code>会返回该函数的引用。
箭头函数不支持<code>new.target</code>：</p>

<ol>
<li>箭头函数的 this 指向全局对象，在箭头函数中使用箭头函数会报错</li>
</ol>

<pre><code class="language-javascript">const a = () =&gt; {
  console.log(new.target); // Uncaught SyntaxError: new.target expression is not allowed here
};

a();
</code></pre>

<ol>
<li>箭头函数的 this 指向普通函数，它的 new.target 就是指向该普通函数的引用。</li>
</ol>

<pre><code class="language-javascript">function B() {
  let a = () =&gt; {
    console.log(new.target); // 指向函数B：function B(){...}
  };
  a();
}
new B();
</code></pre>

<h2 id="duplicated-param-name">Duplicated param name</h2>

<pre><code class="language-javascript">function func1(a, a) {
  console.log(a, arguments);
}
func1(1, 2); // 2 Arguments(2) [1, 2, callee: ƒ, Symbol(Symbol.iterator): ƒ]

const func2 = (a,a) =&gt; {
  console.log(a); // Uncaught SyntaxError: Duplicate parameter name not allowed in this context
};
</code></pre>

<h2 id="function-body">Function body</h2>

<h3 id="return-object-literal">Return object literal</h3>

<pre><code class="language-javascript">const func = () =&gt; {
  foo: 1;
};
func(); // returns undefined
</code></pre>

<pre><code class="language-javascript">const func = () =&gt; ({
  foo: 1,
});
func(); // returns the object. Thus prefer having explicit `return`

// preferred
const func1 = () =&gt; {
  return {
    foo: 1,
  };
};
</code></pre>

<h3 id="no-line-break-between-its-parameters-and-its-arrow">No line break between its parameters and its arrow</h3>

<pre><code class="language-javascript">const func = (a, b, c)
           =&gt; 1; // Uncaught SyntaxError: Unexpected token =&gt;
</code></pre>

<!-- prettier-ignore-start -->

<pre><code class="language-javascript">const func = (
  a,
  b,
  c
) =&gt; {
  return 1; // return as expected
};
</code></pre>

<!-- prettier-ignore-end -->

<h2 id="parsing-order">Parsing Order</h2>

<p>Although the arrow in an arrow function is not an operator, arrow functions have special parsing rules that interact differently with <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence">operator precedence</a> compared to regular functions.</p>

<pre><code class="language-javascript">let callback;

callback = callback || function() {}; // ok

callback = callback || () =&gt; {}; // Uncaught SyntaxError: Malformed arrow function parameter list

callback = callback || (() =&gt; {}); // ok
</code></pre>

<h2 id="resources">Resources</h2>

<ul>
<li><a href="https://mp.weixin.qq.com/s/N0ahVkwVhDpnzGdZyC8jQg">https://mp.weixin.qq.com/s/N0ahVkwVhDpnzGdZyC8jQg</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions</a></li>
</ul>
    </div>

    
    
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">Yuhui Xiong</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">2019-04-25</span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">License</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>

    
    

    <footer class="post-footer">
      <div class="post-tags">
          
          <a href="/hugo/tags/basics/">basics</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/hugo/post/20200716-%E4%B8%80%E5%B9%B4%E9%A1%B6%E5%8D%81%E5%B9%B4/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">《一年顶十年》</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        
          <a class="next" href="/hugo/post/20190413-js-number-and-rounding/">
            <span class="next-text nav-default">JS number and rounding</span>
            <span class="prev-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
    

  

  

  
  </article>
        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:your@email.com" class="iconfont icon-email" title="email"></a>
      <a href="javascript:void%280%29;" class="iconfont icon-stack-overflow" title="stack-overflow"></a>
      <a href="javascript:void%280%29;" class="iconfont icon-twitter" title="twitter"></a>
      <a href="javascript:void%280%29;" class="iconfont icon-facebook" title="facebook"></a>
      <a href="javascript:void%280%29;" class="iconfont icon-linkedin" title="linkedin"></a>
      <a href="javascript:void%280%29;" class="iconfont icon-google" title="google"></a>
      <a href="javascript:void%280%29;" class="iconfont icon-github" title="github"></a>
      <a href="javascript:void%280%29;" class="iconfont icon-weibo" title="weibo"></a>
      <a href="javascript:void%280%29;" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="javascript:void%280%29;" class="iconfont icon-douban" title="douban"></a>
      <a href="javascript:void%280%29;" class="iconfont icon-pocket" title="pocket"></a>
      <a href="javascript:void%280%29;" class="iconfont icon-tumblr" title="tumblr"></a>
      <a href="javascript:void%280%29;" class="iconfont icon-instagram" title="instagram"></a>
  <a href="https://yuhuix.github.io/hugo/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy; 
    
      2018 - 
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Yuhui Xiong</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/hugo/lib/highlight/highlight.pack.js?v=20171001"></script>
<script type="text/javascript" src="/hugo/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/hugo/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/hugo/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>
<script type="text/javascript" src="/hugo/dist/jane.min.js?v=2.7.0"></script>





</body>
</html>
